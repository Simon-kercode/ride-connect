let burger=document.querySelector('#burger');let closeBurger=document.querySelector('#closeBurger');let menuLinks=document.querySelector('#menuLinks');closeBurger.style.display='none';burger.addEventListener('click',function(){menuLinks.classList.add('navOn');burger.style.display='none';closeBurger.style.display='block';})
closeBurger.addEventListener('click',function(){menuLinks.classList.remove('navOn');burger.style.display='block';closeBurger.style.display='none';})
let scrollTopBtn=document.getElementById('scrollTopBtn');scrollTopBtn.addEventListener('click',function(e){e.preventDefault();window.scrollTo({top:0,behavior:'smooth'});});if(paramIndex('inscription')!==-1){formVerification();}
if(paramIndex('organiser')!==-1){dateFormat();}
if(paramIndex('profil')!==-1){displayProfilePart();displayInput();displayProfileModal();}
if(paramIndex('administration')!==-1){displayAdminPart();displayAdminModal();}
function formVerification(){let checkbox=document.querySelector('.checkbox');checkbox.addEventListener('change',function(){let formBtn=document.querySelector('.formBtn');if(checkbox.checked){formBtn.disabled=false;}
else formBtn.disabled=true;})
let form=document.querySelector("#registerForm");form.addEventListener("submit",function(event){let emailInput=document.getElementsByName("email")[0];let passwordInput=document.getElementsByName("password")[0];let pseudoInput=document.getElementsByName("pseudo")[0];let nameInput=document.getElementsByName("name")[0];let firstnameInput=document.getElementsByName("firstname")[0];let rgpdCheckbox=document.getElementsByName("rgpd")[0];let errorElements=document.querySelectorAll(".error");errorElements.forEach(function(element){element.remove();});let errors=[];if(emailInput.value.trim()===""){displayError(emailInput,"Veuillez saisir votre adresse email.");errors.push("Veuillez saisir votre adresse email.");}
if(passwordInput.value.trim()===""){displayError(passwordInput,"Veuillez saisir un mot de passe.");errors.push("Veuillez saisir votre mot de passe.");}
if(pseudoInput.value.trim()===""){displayError(pseudoInput,"Veuillez choisir un pseudo.");errors.push("Veuillez choisir un pseudo.");}
if(nameInput.value.trim()===""){displayError(nameInput,"Veuillez saisir votre nom.");errors.push("Veuillez saisir votre nom.");}
if(firstnameInput.value.trim()===""){displayError(firstnameInput,"Veuillez saisir votre prÃ©nom.");errors.push("Veuillez saisir votre prÃ©nom.");}
if(!rgpdCheckbox.checked){displayError(rgpdCheckbox,"Veuillez accepter les conditions d'utilisation.");errors.push("Veuillez accepter les conditions d'utilisation.");}
if(errors.length>0){event.preventDefault();}});}
function dateFormat(){document.addEventListener('DOMContentLoaded',function(){let dateInput=document.querySelector('#dateInput');let currentDate=new Date();let formattedDate=currentDate.toISOString().split('T')[0];dateInput.value=formattedDate;});}
function displayProfilePart(){let myInfo=document.querySelector('#myInfo');let myRides=document.querySelector('#myRides');let mySubscribedRides=document.querySelector('#mySubscribedRides');let myInfoBtn=document.querySelector('#myInfoBtn');let myRidesBtn=document.querySelector('#myRidesBtn');let mySubscribedRidesBtn=document.querySelector('#mySubscribedRidesBtn');myInfoBtn.addEventListener('click',function(){myInfo.style.display='block';myRides.style.display='none';mySubscribedRides.style.display='none';});myRidesBtn.addEventListener('click',function(){myInfo.style.display='none';myRides.style.display='block';mySubscribedRides.style.display='none';});mySubscribedRidesBtn.addEventListener('click',function(){myInfo.style.display='none';myRides.style.display='none';mySubscribedRides.style.display='block';});}
function displayInput(){let inputs=[document.querySelector('#newEmail'),document.querySelector('#newPseudo'),document.querySelector('#newName'),document.querySelector('#newFirstname'),document.querySelector('#inputPasswordUpdate')];let btns=[document.querySelector('#emailUpdateBtn'),document.querySelector('#pseudoUpdateBtn'),document.querySelector('#nameUpdateBtn'),document.querySelector('#firstnameUpdateBtn'),document.querySelector('#passwordUpdateBtn')];for(let i=0;i<btns.length;i++){btns[i].addEventListener('click',function(event){event.preventDefault();if(inputs[i].classList.contains('hiddenInput')){inputs[i].classList.remove('hiddenInput');btns[i].style.display='none';}});}
let resetBtn=document.querySelector('#resetBtn');resetBtn.addEventListener('click',function(){inputs.forEach(input=>{if(input.value!==""){input.value="";}
if(!input.classList.contains('hiddenInput')){input.classList.add('hiddenInput');}});btns.forEach(btn=>{if(btn.style.display!=='block'){btn.style.display='block';}});});}
function displayAdminPart(){let usersList=document.querySelector('#usersList');let ridesList=document.querySelector('#ridesList');let messagesList=document.querySelector('#messagesList');let usersBtn=document.querySelector('#usersBtn');let ridesBtn=document.querySelector('#ridesBtn');let messagesBtn=document.querySelector('#messagesBtn');usersBtn.addEventListener('click',function(){usersList.style.display='block';ridesList.style.display='none';messagesList.style.display='none';});ridesBtn.addEventListener('click',function(){usersList.style.display='none';ridesList.style.display='block';messagesList.style.display='none';});messagesBtn.addEventListener('click',function(){usersList.style.display='none';ridesList.style.display='none';messagesList.style.display='block';});}
function displayError(inputElement,errorMessage){errorElement=document.createElement("p");errorElement.className="error";errorElement.textContent=errorMessage;inputElement.parentNode.insertBefore(errorElement,inputElement.nextSibling);}
function displayProfileModal(){let modal=document.querySelector('#modal');let profileRideDeleteButtons=document.querySelectorAll('.profileRideDeleteButton');let accountDeleteButton=document.querySelector('#accountDelete');let confirmationButton=document.querySelector('#confirmationButton');let cancelButton=document.querySelector('#cancelButton');let href='';accountDeleteButton.addEventListener('click',function(){modal.showModal();if(paramIndex('profil')!==-1){confirmationButton.addEventListener('click',function(){href='profil/supprimer';confirmationButton.setAttribute('href',href);modal.close();})}});profileRideDeleteButtons.forEach(profileRideDeleteButton=>{profileRideDeleteButton.addEventListener('click',function(){modal.showModal();let idBalade=profileRideDeleteButton.getAttribute('data-idBalade');if(paramIndex('profil')!==-1){confirmationButton.addEventListener('click',function(){href='profil/supprimer/'+idBalade;confirmationButton.setAttribute('href',href);modal.close();})}})})
cancelButton.addEventListener('click',function(){modal.close();})}
function displayAdminModal(){let modal=document.querySelector('#modal');let adminAccountDeleteButtons=document.querySelectorAll('.adminAccountDeleteButton');let adminRideDeleteButtons=document.querySelectorAll('.adminRideDeleteButton');let confirmationButton=document.querySelector('#confirmationButton');let cancelButton=document.querySelector('#cancelButton');let href='';adminAccountDeleteButtons.forEach(adminAccountDeleteButton=>{adminAccountDeleteButton.addEventListener('click',function(){modal.showModal();let idUser=adminAccountDeleteButton.getAttribute('data-idUser');if(paramIndex('administration')!==-1){confirmationButton.addEventListener('click',function(){href='administration/supprimer/utilisateur/'+idUser;confirmationButton.setAttribute('href',href);modal.close();})}})})
adminRideDeleteButtons.forEach(adminRideDeleteButton=>{adminRideDeleteButton.addEventListener('click',function(){modal.showModal();let idBalade=adminRideDeleteButton.getAttribute('data-idBalade');if(paramIndex('administration')!==-1){confirmationButton.addEventListener('click',function(){href='administration/supprimer/balade/'+idBalade;confirmationButton.setAttribute('href',href);modal.close();})}})})
cancelButton.addEventListener('click',function(){modal.close();})}
function paramIndex($param){let url=window.location.href;let segments=url.split('/')
let paramIndex=segments.indexOf($param);return paramIndex;}